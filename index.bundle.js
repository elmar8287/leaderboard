(()=>{const e=document.getElementById("add-task-btn"),t=document.getElementById("description-task"),n=document.querySelector(".todos-wrapper");let r;r=localStorage.tasks?JSON.parse(localStorage.getItem("tasks")):[];let a=null;function o(e){this.description=e,this.completed=!1,this.index=r.length+1}const c=()=>{n.innerHTML="",r.length>0&&(r.forEach(((e,t)=>{n.innerHTML+=((e,t)=>`\n    <li class="todo-item ${e.completed?"checked":""} draggable" draggable='true'>\n      \n      <input onclick="completeTask(${t})" class="btn-competed checkbox" type="checkbox" ${e.completed?"checked":""}>\n      <div class="elmar">\n        <div class="description">${e.description}</div>\n        <div class="buttons">\n          <button onclick="editTask(${t})" type="button" class="btn-delete">Edit</button>\n          <button onclick="deleteTask(${t})" type="button" class="btn-delete">Delete</button>\n          </div>\n      </div>   \n    </li>\n  `)(e,t)})),a=document.querySelectorAll(".todo-item"))};c();const s=()=>{localStorage.setItem("tasks",JSON.stringify(r))};e.addEventListener("click",(()=>{r.push(new o(t.value)),s(),c(),t.value=""}));class d{constructor(){this.prevRow}setEventListeners(){document.querySelectorAll("li").forEach((e=>{e.addEventListener("dragstart",(e=>this.start(e))),e.addEventListener("dragover",(e=>this.over(e))),e.addEventListener("drop",(e=>this.drop(e)))}))}start(e){this.prevRow=e.target;let t=e.target.innerHTML,n=e.target.querySelector("input").checked;e.dataTransfer.setData("html-content",t),e.dataTransfer.setData("checkbox-status",n)}over(e){let t;t="LI"===e.target.parentNode.tagName?e.target.parentNode:"DIV"===e.target.parentNode.tagName?e.target.parentNode.parentNode:e.target,e.preventDefault(),this.prevRow!==t&&(this.prevRow.innerHTML=t.innerHTML,this.prevRow.querySelector("input").checked=t.querySelector("input").checked,t.innerHTML="",this.prevRow=t)}drop(e){const t=e.dataTransfer.getData("html-content"),n=e.dataTransfer.getData("checkbox-status");e.target.innerHTML=t,e.target.querySelector("input").checked="true"===n}}init=()=>{(new d).setEventListeners()},new Promise((function(e){window.addEventListener("load",e)})).then((function(e){init()})),document.querySelectorAll(".checkbox").forEach((e=>{e.addEventListener("change",(e=>{const t=updateStatus(e,s());saveToStorage("TodoList",t)}))})),document.querySelector("#clear").addEventListener("click",(()=>{(()=>{const e=JSON.parse(localStorage.getItem("tasks"));e.forEach((e=>{e.completed&&(e.index=0)}));const t=e.filter((e=>0!==e.index));if(t.length>0){let e=1;t.forEach((t=>{t.index=e,e+=1}))}localStorage.setItem("tasks",JSON.stringify(t)),Array.from(document.querySelectorAll('input[type="checkbox"]')).forEach((e=>{e.checked&&e.parentNode.remove()}))})()}))})();