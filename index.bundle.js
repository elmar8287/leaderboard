(()=>{const e="https://us-central1-js-capstone-backend.cloudfunctions.net/api/",t=document.querySelector("#form"),n=document.querySelector("#scoreList"),s=document.querySelector("#refreshBtn"),a=document.querySelector("#name"),o=document.querySelector("#score");window.addEventListener("DOMContentLoaded",(async()=>{const{result:c}=await(async t=>{const n=await fetch(`${e}games/`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:"My cool new game"})});return await n.json()})(),r=c.split(" ")[2];t.addEventListener("submit",(async t=>{t.preventDefault();const n={user:a.value,score:o.value};await(async(t,n)=>{const s=await fetch(`${e}games/${n}/scores/`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});return await s.json()})(n,r)})),s.addEventListener("click",(async()=>{const t=await(async t=>{const n=await fetch(`${e}games/${t}/scores/`);return await n.json()})(r);n.innerHTML=t.result.map((e=>`<li class="list-group-item d-flex justify-content-between align-items-start">${e.user}:${e.score}</li>`)).join("")}))}))})();