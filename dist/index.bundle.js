(()=>{const e="https://us-central1-js-capstone-backend.cloudfunctions.net/api/",t=document.querySelector("#form"),n=document.querySelector("#scoreList"),s=document.querySelector("#refreshBtn");window.addEventListener("DOMContentLoaded",(async()=>{const{result:a}=await(async t=>{const n=await fetch(`${e}games/`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:"My cool new game"})});return await n.json()})(),o=a.split(" ")[0];t.addEventListener("submit",(async n=>{n.preventDefault();const[s,a]=t.children,c={user:s.value,score:a.value};await(async(t,n)=>{const s=await fetch(`${e}games/${n}/scores/`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});return await s.json()})(c,o)})),s.addEventListener("click",(async()=>{const t=await(async t=>{const n=await fetch(`${e}games/${t}/scores/`);return await n.json()})(o);n.innerHTML=t.result.map((e=>`<li><span>${e.user}</span><span> ${e.score}</span></li>`)).join("")}))}))})();